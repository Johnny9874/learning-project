<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="index.css">
    <title>Todo app</title>
</head>
<body>
    <h1>Welcome to my todo app</h1>

    <label for="task">Write out your task here : </label>
    <input type="text" id="task-input" placeholder="your task">
    <button onclick=addfunction()>Add</button>

    <div id="task-container">
        <h2> Mes tâches : </h2>
    </div>

    <button onclick=deleteFunction()>Clear all</button>

    <script>
        /*
            Quand user écrit une tache à faire dans le champ de texte et appuie sur boutton:
                - On récupére ce qu'a saisi l'user et on le stocke dans une variable;
                - On vérifie si le champ n'est pas vide, si il est vide:
                    - On envoie une pop up à l'user signalant de saisir quelque chose
                    - Si il n'est pas vide on l'affiche sur la page dans le div task-container
                - On sauvegarde ensuite ces taches dans localStorage
                - On implémentera ensuite un systeme de supréssion de tache :
                    - Chaque tache aura un boutton permettant de supprimer la tache,
                    - Si on appuie dessus la tache sera plus visble coté client et de localStorage
        */

        let taskContainer = document.getElementById('task-container');
        let element = document.getElementById('task-input');
        let arrayList = [];

        let taskfromStorage = localStorage.getItem("tasks");
        if (taskfromStorage) {
            arrayList = JSON.parse(taskfromStorage);
            arrayList.forEach((tasks) => {
                let pElement = document.createElement("p");
                pElement.innerText = tasks;
                taskContainer.appendChild(pElement);
            }) 
        }
        
        function addfunction() {
            if (element.value == '') {
                alert("Veuillez saisir une tache !");
            } else {
                arrayList.push(element.value);
                localStorage.setItem("tasks", JSON.stringify(arrayList));
                let textFromStorage = localStorage.getItem("tasks");
                let tasks = JSON.parse(textFromStorage); 

                let pElement = document.createElement("p");
                pElement.innerText = element.value;
                taskContainer.appendChild(pElement);
                element.value = '';
            }
        }

        function deleteFunction() {
            localStorage.removeItem("tasks");
            arrayList = [];
            taskContainer.innerHTML = "<h2> Mes tâches </h2>";
        }
    </script>
</body>
</html>